const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/emailService-CjzdpUYr.js","assets/react-vendor-Dn3TfeyG.js","assets/supabase-CDMW_bd0.js","assets/icons-BuQqyrot.js","assets/LandingPage-D1fBz2P2.js","assets/CompaniesPage-NVL51Qhm.js","assets/AboutPage-CNfUxWzr.js","assets/SubmitReviewPage-yVAhPzuX.js","assets/ProgressBar-C0BqpUK9.js","assets/CompanyProfilePage-i4mCkcTl.js","assets/charts-M73zsuBN.js","assets/RequestCompanyPage-CVpUW77G.js","assets/DomainInput-C6N3Z7rP.js","assets/IndustrySelect-D-V7RFcb.js","assets/CompanyRequestedPage-m2yC1ZlC.js","assets/AdminCompanyRequestsPage-DloA6CSv.js","assets/AdminCompaniesPage-Db0x-E3a.js","assets/NotificationPage-ClH0fG7N.js"])))=>i.map(i=>d[i]);
import{r as o,a as re,u as V,d as ne,B as ie,e as oe,f as _}from"./react-vendor-Dn3TfeyG.js";import{c as le,_ as N}from"./supabase-CDMW_bd0.js";import{X as T,S,M as ce,L as q,C as U,A,a as F,b as L,U as de,c as me,d as P,e as ue,T as xe,F as he,f as fe,I as pe,g as ge,h as ye,i as be}from"./icons-BuQqyrot.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var $={exports:{}},I={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var je=o,we=Symbol.for("react.element"),ve=Symbol.for("react.fragment"),Ne=Object.prototype.hasOwnProperty,_e=je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ce={key:!0,ref:!0,__self:!0,__source:!0};function B(a,t,s){var r,n={},i=null,l=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Ne.call(t,r)&&!Ce.hasOwnProperty(r)&&(n[r]=t[r]);if(a&&a.defaultProps)for(r in t=a.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:we,type:a,key:i,ref:l,props:n,_owner:_e.current}}I.Fragment=ve;I.jsx=B;I.jsxs=B;$.exports=I;var e=$.exports,Y,D=re;Y=D.createRoot,D.hydrateRoot;const Se="https://imlajpgvwpuoiqogzmjx.supabase.co",Ee="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltbGFqcGd2d3B1b2lxb2d6bWp4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5ODcyNTksImV4cCI6MjA3OTU2MzI1OX0.Y6WoIpX_ljbo7AaeDvgZMeWYUejSIKgwUcQL0MkN6Og",h=le(Se,Ee,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),z=async a=>{const{data:t,error:s}=await h.auth.signInWithOtp({email:a,options:{shouldCreateUser:!0}});if(s)throw s;return t},ke=async(a,t)=>{const{data:s,error:r}=await h.auth.verifyOtp({email:a,token:t,type:"email"});if(r)throw r;return s},E=async()=>{const{data:{user:a},error:t}=await h.auth.getUser();return t?(console.error("Error fetching user:",t),null):a},He=async()=>{const{data:a,error:t}=await h.from("company_stats").select("*").order("review_count",{ascending:!1});if(t)throw t;return a},Ze=async a=>{const{data:t,error:s}=await h.from("company_stats").select("*").eq("id",a).maybeSingle();if(s)throw s;return t},Qe=async a=>{if(!a.trim()){const{data:r,error:n}=await h.from("companies").select("id, name, industry, size").order("name").limit(10);if(n)throw n;return r}const{data:t,error:s}=await h.from("companies").select("id, name, industry, size").ilike("name",`%${a}%`).order("name").limit(10);if(s)throw s;return t},et=async(a,t)=>{let s=h.from("reviews").select("*").eq("company_id",a);switch(t!=null&&t.rating&&(s=s.gte("overall_rating",t.rating)),t!=null&&t.recommendation&&(s=s.eq("recommendation",t.recommendation)),t==null?void 0:t.sortBy){case"rating-high":s=s.order("overall_rating",{ascending:!1});break;case"rating-low":s=s.order("overall_rating",{ascending:!0});break;case"helpful":s=s.order("helpful_count",{ascending:!1});break;default:s=s.order("created_at",{ascending:!1})}t!=null&&t.limit&&(s=s.limit(t.limit)),t!=null&&t.offset&&(s=s.range(t.offset,t.offset+(t.limit||10)-1));const{data:r,error:n}=await s;if(n)throw n;return r},tt=async a=>{const t=await E();if(!t)throw new Error("User must be authenticated");const{data:s,error:r}=await h.from("reviews").insert({...a,user_id:t.id}).select().maybeSingle();if(r)throw r;return s},st=async(a,t)=>{const{data:s,error:r}=await h.from("companies").update({...t,updated_at:new Date().toISOString()}).eq("id",a).select().maybeSingle();if(r)throw r;return s},Ae=async a=>{const s=new TextEncoder().encode(a.toLowerCase()),r=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")},at=async a=>{const t=await E();if(!(t!=null&&t.email))throw new Error("User must be authenticated");const s=await Ae(t.email),{data:r,error:n}=await h.from("company_requests").insert({...a,requester_hash:s,requester_email:t.email}).select().maybeSingle();if(n)throw n;return r},rt=async a=>{let t=h.from("company_requests").select("*");t=t.order("created_at",{ascending:!1});const{data:s,error:r}=await t;if(r)throw r;return s},W=async(a,t,s,r)=>{const n=await E();if(!(n!=null&&n.email))throw new Error("Admin must be authenticated");const{data:i,error:l}=await h.from("company_requests").update({status:t,admin_notes:s,rejection_reason:r,reviewed_at:new Date().toISOString(),reviewed_by:n.email}).eq("id",a).select().maybeSingle();if(l)throw l;return i},nt=async(a,t,s)=>{const r=await W(a,"approved",t),n=s||{company_name:r.company_name,company_website:r.company_website,email_domains:r.email_domains,industry:r.industry,company_size:r.company_size},{data:i,error:l}=await h.from("companies").insert({name:n.company_name,industry:n.industry,size:n.company_size,source:"user_request",request_id:a}).select().maybeSingle();if(l)throw l;const x=await J({recipient_hash:r.requester_hash,type:"company_approved",title:"Company Request Approved!",message:`Your request to add "${r.company_name}" has been approved. You can now submit your review.`,data:{company_id:i.id,company_name:r.company_name,request_id:a}});try{const{sendCompanyApprovedEmail:d}=await N(async()=>{const{sendCompanyApprovedEmail:m}=await import("./emailService-CjzdpUYr.js");return{sendCompanyApprovedEmail:m}},__vite__mapDeps([0,1,2,3]));await d(r.requester_email,r.company_name,x.token)}catch(d){console.error("Failed to send approval email:",d)}return{request:r,company:i}},it=async(a,t,s)=>{const r=await W(a,"rejected",s,t),n=await J({recipient_hash:r.requester_hash,type:"company_rejected",title:"Company Request Update",message:`Your request to add "${r.company_name}" could not be approved. Reason: ${t}`,data:{company_name:r.company_name,rejection_reason:t,request_id:a}});try{const{sendCompanyRejectedEmail:i}=await N(async()=>{const{sendCompanyRejectedEmail:l}=await import("./emailService-CjzdpUYr.js");return{sendCompanyRejectedEmail:l}},__vite__mapDeps([0,1,2,3]));await i(r.requester_email,r.company_name,n.token,t)}catch(i){console.error("Failed to send rejection email:",i)}return r},J=async a=>{const{data:t,error:s}=await h.from("notifications").insert({...a,expires_at:new Date(Date.now()+6048e5).toISOString()}).select().maybeSingle();if(s)throw s;return t},ot=async a=>{const{data:t,error:s}=await h.from("notifications").select("*").eq("token",a).maybeSingle();if(s)throw s;return t},lt=async a=>{const{data:t,error:s}=await h.from("notifications").update({read:!0}).eq("token",a).select().maybeSingle();if(s)throw s;return t},X=async()=>{try{const a=await E();if(!a)return!1;const{data:t,error:s}=await h.from("admin_users").select("id").eq("user_id",a.id).maybeSingle();return!s&&!!t}catch{return!1}},ct=async(a,t)=>{const{data:s,error:r}=await h.from("companies").select("id, name").or(`name.ilike.%${a}%,name.ilike.%${t.replace("https://","").replace("www.","")}%`);return r?[]:s||[]},Ie=({length:a=6,value:t,onChange:s,disabled:r=!1,error:n=!1})=>{const i=o.useRef([]),[l,x]=o.useState(Array(a).fill(""));o.useEffect(()=>{const c=t.split("").slice(0,a),u=[...c,...Array(a-c.length).fill("")];x(u)},[t,a]);const d=(c,u)=>{var b,w;if(r)return;const p=u.replace(/[^0-9]/g,"");if(p.length===0){const j=[...l];j[c]="",x(j),s(j.join(""));return}if(p.length===1){const j=[...l];j[c]=p,x(j),s(j.join("")),c<a-1&&((b=i.current[c+1])==null||b.focus())}else if(p.length>1){const j=p.split("").slice(0,a),f=[...j,...Array(Math.max(0,a-j.length)).fill("")];x(f),s(f.join(""));const v=Math.min(j.length,a-1);(w=i.current[v])==null||w.focus()}},m=(c,u)=>{var p,b,w;r||(u.key==="Backspace"&&!l[c]&&c>0?(p=i.current[c-1])==null||p.focus():u.key==="ArrowLeft"&&c>0?(u.preventDefault(),(b=i.current[c-1])==null||b.focus()):u.key==="ArrowRight"&&c<a-1&&(u.preventDefault(),(w=i.current[c+1])==null||w.focus()))},y=c=>{var f;if(r)return;c.preventDefault();const b=c.clipboardData.getData("text").replace(/[^0-9]/g,"").split("").slice(0,a),w=[...b,...Array(Math.max(0,a-b.length)).fill("")];x(w),s(w.join(""));const j=Math.min(b.length,a-1);(f=i.current[j])==null||f.focus()};return e.jsx("div",{className:"flex gap-2 justify-center",children:l.map((c,u)=>e.jsx("input",{ref:p=>i.current[u]=p,type:"text",inputMode:"numeric",maxLength:1,value:c,onChange:p=>d(u,p.target.value),onKeyDown:p=>m(u,p),onPaste:y,disabled:r,className:`w-12 h-14 text-center text-2xl font-semibold rounded-lg border-2 transition-all duration-200
            ${n?"border-red-300 bg-red-50 text-red-600 focus:ring-red-500 focus:border-red-500":"border-gray-300 bg-white text-gray-900 focus:ring-blue-500 focus:border-blue-500"}
            focus:ring-2 focus:outline-none
            disabled:opacity-50 disabled:cursor-not-allowed
            hover:border-gray-400
          `,"aria-label":`Digit ${u+1}`},u))})},K=({isOpen:a,onClose:t,onVerified:s,isAdminMode:r=!1})=>{const[n,i]=o.useState(""),[l,x]=o.useState(null),[d,m]=o.useState(""),[y,c]=o.useState(!1),[u,p]=o.useState(!1),[b,w]=o.useState(""),[j,f]=o.useState(!1),[v,C]=o.useState(0),R=!1,G=!0;o.useEffect(()=>{if(a&&R){const g=r?"/admin/company-requests":"/submit-review";window.location.href=g}},[a,R,r]);const H=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;o.useEffect(()=>{a&&(i(""),x(null),m(""),c(!1),p(!1),w(""),f(!1),C(0))},[a]),o.useEffect(()=>{if(!n){x(null),m("");return}if(!H.test(n)){x(!1),m("Please enter a valid email address");return}x(!0),m("")},[n,G]),o.useEffect(()=>{if(v>0){const g=setTimeout(()=>{C(v-1)},1e3);return()=>clearTimeout(g)}},[v]);const Z=async g=>{if(g.preventDefault(),!(!l||!n)){c(!0),m("");try{await z(n),p(!0),C(600)}catch(k){m(k instanceof Error?k.message:"Failed to send verification code")}finally{c(!1)}}},Q=async()=>{if(b.length===6){c(!0),f(!1),m("");try{await ke(n,b),s&&s(),r?window.location.href="/admin/company-requests":window.location.reload()}catch(g){f(!0),m(g instanceof Error?g.message:"Invalid verification code")}finally{c(!1)}}};o.useEffect(()=>{u&&b.length===6&&Q()},[b,u]);const ee=async()=>{if(!(v>0)){c(!0),m(""),w(""),f(!1);try{await z(n),C(600)}catch(g){m(g instanceof Error?g.message:"Failed to resend code")}finally{c(!1)}}},O=()=>{y||t()},te=g=>{g.target===g.currentTarget&&O()},se=g=>{const k=Math.floor(g/60),ae=g%60;return`${k}:${ae.toString().padStart(2,"0")}`};return!a||R?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm animate-fade-in",onClick:te,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto animate-slide-up",children:[e.jsxs("div",{className:"relative p-6 pb-4",children:[e.jsx("button",{onClick:O,disabled:y,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200 disabled:opacity-50","aria-label":"Close modal",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-100 to-green-100 rounded-full flex items-center justify-center",children:r?e.jsx(S,{className:"w-8 h-8 text-blue-600"}):e.jsx(ce,{className:"w-8 h-8 text-blue-600"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(q,{className:"w-4 h-4 text-white"})})]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:u?"Enter Verification Code":r?"Admin Login":"Verify Your Email"}),e.jsx("p",{className:"text-gray-600 text-center leading-relaxed",children:u?`We sent a 6-digit code to ${n}`:r?"Enter your admin email to receive a secure verification code for instant access.":"To keep reviews authentic and anonymous, please verify your email with a secure code."})]}),e.jsxs("div",{className:"px-6 pb-6",children:[u?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ie,{value:b,onChange:w,disabled:y,error:j}),d&&e.jsxs("p",{className:"mt-3 text-sm text-red-600 flex items-center justify-center",children:[e.jsx(A,{className:"w-4 h-4 mr-1 flex-shrink-0"}),d]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:ee,disabled:y||v>0,className:"text-sm text-blue-600 hover:text-blue-700 transition-colors duration-200 disabled:text-gray-400 disabled:cursor-not-allowed",children:v>0?`Resend available in ${se(v)}`:"Resend Code"})}),e.jsx("button",{onClick:()=>p(!1),disabled:y,className:"w-full border border-gray-300 text-gray-700 py-3 px-6 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Change Email"})]}):e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",value:n,onChange:g=>i(g.target.value),placeholder:"Enter your email address",disabled:y,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-gray-900 placeholder-gray-400 ${l===!1?"border-red-300 bg-red-50":l===!0?"border-green-300 bg-green-50":"border-gray-300 bg-white"}`,"aria-describedby":d?"email-error":void 0}),l!==null&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:l?e.jsx(U,{className:"w-5 h-5 text-green-500"}):e.jsx(A,{className:"w-5 h-5 text-red-500"})})]}),d&&e.jsxs("p",{id:"email-error",className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(A,{className:"w-4 h-4 mr-1 flex-shrink-0"}),d]})]}),e.jsx("button",{type:"submit",disabled:!l||y,className:"w-full bg-gradient-to-r from-blue-600 to-green-500 text-white py-3 px-6 rounded-lg font-medium hover:shadow-lg hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:shadow-none flex items-center justify-center space-x-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Sending..."})]}):e.jsx("span",{children:"Send Verification Code"})})]}),!u&&e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(q,{className:"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0"}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.jsx("span",{className:"font-medium",children:"Secure & Password-Free"})," - Enter the 6-digit code sent to your email to verify and sign in instantly."]})})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{href:"/support",className:"text-sm text-blue-600 hover:text-blue-700 transition-colors duration-200",children:"Need help? Contact Support"})})]})]})})},Re=()=>{const a=V(),[t,s]=o.useState(!1),[r,n]=o.useState(!1),[i,l]=o.useState(null),[x,d]=o.useState(!1),[m,y]=o.useState(!0),[c,u]=o.useState(!1);o.useEffect(()=>{p();{const{data:f}=h.auth.onAuthStateChange((v,C)=>{C!=null&&C.user?l(C.user):l(null)});return()=>{f.subscription.unsubscribe()}}},[]);const p=async()=>{try{const f=await E();if(l(f),f){const v=await X();u(v)}else u(!1)}catch{l(null),u(!1)}finally{y(!1)}},b=()=>{i?a("/submit-review"):n(!0)},w=async()=>{try{await h.auth.signOut(),l(null),d(!1),a("/")}catch(f){console.error("Logout failed:",f)}},j=()=>{if(!(i!=null&&i.email))return"";const f=i.email;return f.length>25?f.substring(0,22)+"...":f};return e.jsxs(e.Fragment,{children:[!1,e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-green-500 rounded-lg flex items-center justify-center",children:e.jsx(F,{className:"w-4 h-4 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Truplace"})]})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[e.jsx("a",{href:"/companies",className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",children:"Companies"}),e.jsx("a",{href:"/about",className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",children:"About"}),c&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("a",{href:"/admin/company-requests",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Requests"})]}),e.jsxs("a",{href:"/admin/companies",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Companies"})]})]})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsxs("button",{onClick:b,className:"bg-gradient-to-r from-blue-600 to-green-500 text-white px-6 py-2 rounded-lg font-medium hover:shadow-lg hover:scale-105 transition-all duration-300 flex items-center space-x-2",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:"Write a Review"})]}),i&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>d(!x),className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-green-500 rounded-full flex items-center justify-center",children:e.jsx(de,{className:"w-4 h-4 text-white"})}),e.jsx(me,{className:"w-4 h-4 text-gray-600"})]}),x&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Signed in as"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:j()}),c&&e.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-0.5 mt-1 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:[e.jsx(S,{className:"w-3 h-3"}),e.jsx("span",{children:"Admin"})]})]}),c&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/admin/company-requests",className:"w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 flex items-center space-x-2 transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Company Requests"})]}),e.jsxs("a",{href:"/admin/companies",className:"w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 flex items-center space-x-2 transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Manage Companies"})]})]}),e.jsxs("button",{onClick:w,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2 transition-colors duration-200",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})]}),e.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200",onClick:()=>s(!t),"aria-label":"Toggle menu",children:t?e.jsx(T,{className:"w-6 h-6"}):e.jsx(ue,{className:"w-6 h-6"})})]}),t&&e.jsxs("div",{className:"md:hidden border-t border-gray-200 py-4",children:[i&&e.jsxs("div",{className:"px-4 py-3 mb-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Signed in as"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:j()})]}),e.jsxs("nav",{className:"flex flex-col space-y-4",children:[e.jsx("a",{href:"/companies",className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",children:"Companies"}),e.jsx("a",{href:"/about",className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",children:"About"}),c&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/admin/company-requests",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Company Requests"})]}),e.jsxs("a",{href:"/admin/companies",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Manage Companies"})]})]}),e.jsxs("button",{onClick:b,className:"bg-gradient-to-r from-blue-600 to-green-500 text-white px-6 py-2 rounded-lg font-medium hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2 w-full",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:"Write a Review"})]}),i&&e.jsxs("button",{onClick:w,className:"border border-gray-300 text-gray-700 px-6 py-2 rounded-lg font-medium hover:bg-gray-50 transition-all duration-300 flex items-center justify-center space-x-2 w-full",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})]})}),e.jsx(K,{isOpen:r,onClose:()=>n(!1),isAdminMode:!1})]})},Te=()=>{const[a,t]=o.useState(!1);return e.jsxs("footer",{className:"bg-gray-900 text-white",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-green-500 rounded-lg flex items-center justify-center",children:e.jsx(F,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-xl font-bold",children:"Truplace"})]}),e.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed",children:"The most trusted platform for anonymous workplace reviews. Help others make informed career decisions with honest insights about company culture, management, and work environment."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r hover:from-blue-600 hover:to-green-500 transition-all duration-300","aria-label":"Twitter",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r hover:from-blue-600 hover:to-green-500 transition-all duration-300","aria-label":"Facebook",children:e.jsx(he,{className:"w-4 h-4"})}),e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r hover:from-blue-600 hover:to-green-500 transition-all duration-300","aria-label":"LinkedIn",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r hover:from-blue-600 hover:to-green-500 transition-all duration-300","aria-label":"Instagram",children:e.jsx(pe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"/about",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"/contact",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Contact"})}),e.jsx("li",{children:e.jsx("a",{href:"/careers",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Careers"})}),e.jsx("li",{children:e.jsx("a",{href:"/blog",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Blog"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"/privacy",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"/terms",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx("a",{href:"/guidelines",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Community Guidelines"})}),e.jsx("li",{children:e.jsx("a",{href:"/cookies",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Cookie Policy"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>t(!0),className:"text-gray-400 hover:text-gray-300 transition-colors duration-200 text-sm",children:"Admin"})})]})]})]}),e.jsx("div",{className:"border-t border-gray-800 mt-12 pt-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Â© 2025 Truplace. All rights reserved."}),e.jsxs("div",{className:"flex items-center space-x-6 mt-4 md:mt-0",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Trusted by professionals worldwide"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-400 text-sm font-medium",children:"Secure & Anonymous"})]})]})]})})]}),e.jsx(K,{isOpen:a,onClose:()=>t(!1),isAdminMode:!0})]})},Oe=({id:a,type:t,message:s,duration:r=5e3,onClose:n})=>{o.useEffect(()=>{const d=setTimeout(()=>{n(a)},r);return()=>clearTimeout(d)},[a,r,n]);const i=()=>{switch(t){case"success":return e.jsx(U,{className:"w-5 h-5"});case"error":return e.jsx(ye,{className:"w-5 h-5"});case"warning":return e.jsx(A,{className:"w-5 h-5"});case"info":return e.jsx(ge,{className:"w-5 h-5"})}},l=()=>{switch(t){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800"}},x=()=>{switch(t){case"success":return"text-green-600";case"error":return"text-red-600";case"warning":return"text-yellow-600";case"info":return"text-blue-600"}};return e.jsxs("div",{className:`${l()} border rounded-lg shadow-lg p-4 flex items-start space-x-3 min-w-[320px] max-w-md animate-slide-in`,role:"alert",children:[e.jsx("div",{className:x(),children:i()}),e.jsx("p",{className:"flex-1 text-sm font-medium",children:s}),e.jsx("button",{onClick:()=>n(a),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close notification",children:e.jsx(T,{className:"w-4 h-4"})})]})},qe=({toasts:a,onClose:t})=>e.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col space-y-3",children:a.map(s=>e.jsx(Oe,{id:s.id,type:s.type,message:s.message,onClose:t},s.id))}),M=({children:a})=>{const t=V(),[s,r]=o.useState(!0),[n,i]=o.useState(!1),[l,x]=o.useState(null);o.useEffect(()=>{d();const{data:{subscription:m}}=h.auth.onAuthStateChange((y,c)=>{c?d():s||(x("You must be logged in to access this page"),i(!1),setTimeout(()=>t("/"),2e3))});return()=>{m.unsubscribe()}},[]);const d=async()=>{try{const{data:{session:m}}=await h.auth.getSession();if(!(m!=null&&m.user)){x("You must be logged in to access this page"),r(!1),setTimeout(()=>t("/"),2e3);return}if(!await X()){x("You do not have admin privileges to access this page"),r(!1),setTimeout(()=>t("/"),2e3);return}i(!0),r(!1)}catch(m){console.error("Admin access check failed:",m),x("Failed to verify admin access"),r(!1),setTimeout(()=>t("/"),2e3)}};return s?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx(S,{className:"w-8 h-8 text-blue-600 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})]}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Verifying admin access..."})]})}):l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(be,{className:"w-6 h-6 text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Access Denied"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:l}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to home page..."})]})}):n?e.jsx(e.Fragment,{children:a}):null},Le=()=>{const[a,t]=o.useState([]),s=o.useCallback((d,m)=>{const y=Math.random().toString(36).substring(7);t(c=>[...c,{id:y,type:d,message:m}])},[]),r=o.useCallback(d=>{t(m=>m.filter(y=>y.id!==d))},[]),n=o.useCallback(d=>{s("success",d)},[s]),i=o.useCallback(d=>{s("error",d)},[s]),l=o.useCallback(d=>{s("warning",d)},[s]),x=o.useCallback(d=>{s("info",d)},[s]);return{toasts:a,removeToast:r,success:n,error:i,warning:l,info:x}},Pe=o.lazy(()=>N(()=>import("./LandingPage-D1fBz2P2.js"),__vite__mapDeps([4,1,3,2]))),De=o.lazy(()=>N(()=>import("./CompaniesPage-NVL51Qhm.js"),__vite__mapDeps([5,1,3,2]))),ze=o.lazy(()=>N(()=>import("./AboutPage-CNfUxWzr.js"),__vite__mapDeps([6,1,2,3]))),Me=o.lazy(()=>N(()=>import("./SubmitReviewPage-yVAhPzuX.js"),__vite__mapDeps([7,1,8,3,2]))),Ve=o.lazy(()=>N(()=>import("./CompanyProfilePage-i4mCkcTl.js"),__vite__mapDeps([9,1,3,10,2]))),Ue=o.lazy(()=>N(()=>import("./RequestCompanyPage-CVpUW77G.js"),__vite__mapDeps([11,1,3,12,13,8,2]))),Fe=o.lazy(()=>N(()=>import("./CompanyRequestedPage-m2yC1ZlC.js"),__vite__mapDeps([14,1,3,2]))),$e=o.lazy(()=>N(()=>import("./AdminCompanyRequestsPage-DloA6CSv.js"),__vite__mapDeps([15,1,3,13,12,2]))),Be=o.lazy(()=>N(()=>import("./AdminCompaniesPage-Db0x-E3a.js"),__vite__mapDeps([16,1,13,3,2]))),Ye=o.lazy(()=>N(()=>import("./NotificationPage-ClH0fG7N.js"),__vite__mapDeps([17,1,3,2]))),We=ne.createContext(null);function Je(){const a=Le();return e.jsx(We.Provider,{value:a,children:e.jsx(ie,{children:e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(Re,{}),e.jsx("div",{className:"flex-grow",children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}),children:e.jsxs(oe,{children:[e.jsx(_,{path:"/",element:e.jsx(Pe,{})}),e.jsx(_,{path:"/submit-review",element:e.jsx(Me,{})}),e.jsx(_,{path:"/request-company",element:e.jsx(Ue,{})}),e.jsx(_,{path:"/company-requested",element:e.jsx(Fe,{})}),e.jsx(_,{path:"/admin/company-requests",element:e.jsx(M,{children:e.jsx($e,{})})}),e.jsx(_,{path:"/admin/companies",element:e.jsx(M,{children:e.jsx(Be,{})})}),e.jsx(_,{path:"/notification/:token",element:e.jsx(Ye,{})}),e.jsx(_,{path:"/company/:companyId",element:e.jsx(Ve,{})}),e.jsx(_,{path:"/companies",element:e.jsx(De,{})}),e.jsx(_,{path:"/about",element:e.jsx(ze,{})})]})})}),e.jsx(Te,{}),e.jsx(qe,{toasts:a.toasts,onClose:a.removeToast})]})})})}Y(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(Je,{})}));export{M as A,K as E,We as T,Qe as a,E as b,tt as c,Ze as d,et as e,ct as f,He as g,at as h,rt as i,e as j,nt as k,ot as l,lt as m,it as r,h as s,st as u};
