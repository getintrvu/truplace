const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/emailService-DjgSit-G.js","assets/react-vendor-Dn3TfeyG.js","assets/supabase-CDMW_bd0.js","assets/icons-BuQqyrot.js","assets/LandingPage-wQaGkQKy.js","assets/CompaniesPage-T7SyRX8Z.js","assets/AboutPage-BV5smuNk.js","assets/SubmitReviewPage-BUESC72h.js","assets/ProgressBar-DxsF-ajT.js","assets/CompanyProfilePage-Cdrx4Hzp.js","assets/charts-M73zsuBN.js","assets/RequestCompanyPage-B-C-GeTB.js","assets/DomainInput-C8SWnfEv.js","assets/IndustrySelect-DVnxjWhL.js","assets/CompanyRequestedPage-CVG2Q1JT.js","assets/AdminCompanyRequestsPage-kUYSkNTf.js","assets/AdminCompaniesPage-BiR5mll4.js","assets/NotificationPage-FyAMxtL1.js"])))=>i.map(i=>d[i]);
import{r as i,a as ce,u as Y,d as le,B as de,e as me,f as E}from"./react-vendor-Dn3TfeyG.js";import{c as ue,_}from"./supabase-CDMW_bd0.js";import{X as L,S,M as xe,L as M,C as J,A as O,a as X,b as U,U as he,c as fe,d as F,e as pe,T as ge,F as ye,f as be,I as je,g as we,h as ve,i as Ne}from"./icons-BuQqyrot.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();var K={exports:{}},I={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _e=i,Ee=Symbol.for("react.element"),Ce=Symbol.for("react.fragment"),Se=Object.prototype.hasOwnProperty,Re=_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ke={key:!0,ref:!0,__self:!0,__source:!0};function G(r,t,s){var a,n={},o=null,c=null;s!==void 0&&(o=""+s),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(c=t.ref);for(a in t)Se.call(t,a)&&!ke.hasOwnProperty(a)&&(n[a]=t[a]);if(r&&r.defaultProps)for(a in t=r.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:Ee,type:r,key:o,ref:c,props:n,_owner:Re.current}}I.Fragment=Ce;I.jsx=G;I.jsxs=G;K.exports=I;var e=K.exports,H,$=ce;H=$.createRoot,$.hydrateRoot;const Te="https://imlajpgvwpuoiqogzmjx.supabase.co",Ae="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltbGFqcGd2d3B1b2lxb2d6bWp4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5ODcyNTksImV4cCI6MjA3OTU2MzI1OX0.Y6WoIpX_ljbo7AaeDvgZMeWYUejSIKgwUcQL0MkN6Og",g=ue(Te,Ae,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),W=async r=>{const{data:t,error:s}=await g.auth.signInWithOtp({email:r});if(s)throw s;return t},Oe=async(r,t)=>{const{data:s,error:a}=await g.auth.verifyOtp({email:r,token:t,type:"magiclink"});if(a)throw a;return s},T=async()=>{const{data:{user:r},error:t}=await g.auth.getUser();return t?(console.error("Error fetching user:",t),null):r},tt=async()=>{const{data:r,error:t}=await g.from("company_stats").select("*").order("review_count",{ascending:!1});if(t)throw t;return r},st=async r=>{const{data:t,error:s}=await g.from("company_stats").select("*").eq("id",r).maybeSingle();if(s)throw s;return t},rt=async r=>{if(!r.trim()){const{data:a,error:n}=await g.from("companies").select("id, name, industry, size").order("name").limit(10);if(n)throw n;return a}const{data:t,error:s}=await g.from("companies").select("id, name, industry, size").ilike("name",`%${r}%`).order("name").limit(10);if(s)throw s;return t},at=async(r,t)=>{let s=g.from("reviews").select("*").eq("company_id",r);switch(t!=null&&t.rating&&(s=s.gte("overall_rating",t.rating)),t!=null&&t.recommendation&&(s=s.eq("recommendation",t.recommendation)),t==null?void 0:t.sortBy){case"rating-high":s=s.order("overall_rating",{ascending:!1});break;case"rating-low":s=s.order("overall_rating",{ascending:!0});break;case"helpful":s=s.order("helpful_count",{ascending:!1});break;default:s=s.order("created_at",{ascending:!1})}t!=null&&t.limit&&(s=s.limit(t.limit)),t!=null&&t.offset&&(s=s.range(t.offset,t.offset+(t.limit||10)-1));const{data:a,error:n}=await s;if(n)throw n;return a},nt=async r=>{const t=await T();if(!t)throw new Error("User must be authenticated");const{data:s,error:a}=await g.from("reviews").insert({...r,user_id:t.id}).select().maybeSingle();if(a)throw a;return s},ot=async(r,t)=>{const{data:s,error:a}=await g.from("companies").update({...t,updated_at:new Date().toISOString()}).eq("id",r).select().maybeSingle();if(a)throw a;return s},Ie=async r=>{const s=new TextEncoder().encode(r.toLowerCase()),a=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(a)).map(o=>o.toString(16).padStart(2,"0")).join("")},it=async r=>{const t=await T();if(!(t!=null&&t.email))throw new Error("User must be authenticated");const s=await Ie(t.email),{data:a,error:n}=await g.from("company_requests").insert({...r,requester_hash:s,requester_email:t.email}).select().maybeSingle();if(n)throw n;return a},ct=async r=>{let t=g.from("company_requests").select("*");t=t.order("created_at",{ascending:!1});const{data:s,error:a}=await t;if(a)throw a;return s},Z=async(r,t,s,a)=>{const n=await T();if(!(n!=null&&n.email))throw new Error("Admin must be authenticated");const{data:o,error:c}=await g.from("company_requests").update({status:t,admin_notes:s,rejection_reason:a,reviewed_at:new Date().toISOString(),reviewed_by:n.email}).eq("id",r).select().maybeSingle();if(c)throw c;return o},lt=async(r,t,s)=>{const a=await Z(r,"approved",t),n=s||{company_name:a.company_name,company_website:a.company_website,email_domains:a.email_domains,industry:a.industry,company_size:a.company_size},{data:o,error:c}=await g.from("companies").insert({name:n.company_name,industry:n.industry,size:n.company_size,source:"user_request",request_id:r}).select().maybeSingle();if(c)throw c;const f=await Q({recipient_hash:a.requester_hash,type:"company_approved",title:"Company Request Approved!",message:`Your request to add "${a.company_name}" has been approved. You can now submit your review.`,data:{company_id:o.id,company_name:a.company_name,request_id:r}});try{const{sendCompanyApprovedEmail:d}=await _(async()=>{const{sendCompanyApprovedEmail:m}=await import("./emailService-DjgSit-G.js");return{sendCompanyApprovedEmail:m}},__vite__mapDeps([0,1,2,3]));await d(a.requester_email,a.company_name,f.token)}catch(d){console.error("Failed to send approval email:",d)}return{request:a,company:o}},dt=async(r,t,s)=>{const a=await Z(r,"rejected",s,t),n=await Q({recipient_hash:a.requester_hash,type:"company_rejected",title:"Company Request Update",message:`Your request to add "${a.company_name}" could not be approved. Reason: ${t}`,data:{company_name:a.company_name,rejection_reason:t,request_id:r}});try{const{sendCompanyRejectedEmail:o}=await _(async()=>{const{sendCompanyRejectedEmail:c}=await import("./emailService-DjgSit-G.js");return{sendCompanyRejectedEmail:c}},__vite__mapDeps([0,1,2,3]));await o(a.requester_email,a.company_name,n.token,t)}catch(o){console.error("Failed to send rejection email:",o)}return a},Q=async r=>{const{data:t,error:s}=await g.from("notifications").insert({...r,expires_at:new Date(Date.now()+6048e5).toISOString()}).select().maybeSingle();if(s)throw s;return t},mt=async r=>{const{data:t,error:s}=await g.from("notifications").select("*").eq("token",r).maybeSingle();if(s)throw s;return t},ut=async r=>{const{data:t,error:s}=await g.from("notifications").update({read:!0}).eq("token",r).select().maybeSingle();if(s)throw s;return t},ee=async()=>{try{const r=await T();if(!r)return!1;const{data:t,error:s}=await g.from("admin_users").select("id").eq("user_id",r.id).maybeSingle();return!s&&!!t}catch{return!1}},xt=async(r,t)=>{const{data:s,error:a}=await g.from("companies").select("id, name").or(`name.ilike.%${r}%,name.ilike.%${t.replace("https://","").replace("www.","")}%`);return a?[]:s||[]},Pe=({length:r=6,value:t,onChange:s,disabled:a=!1,error:n=!1})=>{const o=i.useRef([]),[c,f]=i.useState(Array(r).fill(""));i.useEffect(()=>{const l=t.split("").slice(0,r),x=[...l,...Array(r-l.length).fill("")];f(x)},[t,r]);const d=(l,x)=>{var w,v;if(a)return;const y=x.replace(/[^0-9]/g,"");if(y.length===0){const j=[...c];j[l]="",f(j),s(j.join(""));return}if(y.length===1){const j=[...c];j[l]=y,f(j),s(j.join("")),l<r-1&&((w=o.current[l+1])==null||w.focus())}else if(y.length>1){const j=y.split("").slice(0,r),p=[...j,...Array(Math.max(0,r-j.length)).fill("")];f(p),s(p.join(""));const N=Math.min(j.length,r-1);(v=o.current[N])==null||v.focus()}},m=(l,x)=>{var y,w,v;a||(x.key==="Backspace"&&!c[l]&&l>0?(y=o.current[l-1])==null||y.focus():x.key==="ArrowLeft"&&l>0?(x.preventDefault(),(w=o.current[l-1])==null||w.focus()):x.key==="ArrowRight"&&l<r-1&&(x.preventDefault(),(v=o.current[l+1])==null||v.focus()))},b=l=>{var p;if(a)return;l.preventDefault();const w=l.clipboardData.getData("text").replace(/[^0-9]/g,"").split("").slice(0,r),v=[...w,...Array(Math.max(0,r-w.length)).fill("")];f(v),s(v.join(""));const j=Math.min(w.length,r-1);(p=o.current[j])==null||p.focus()};return e.jsx("div",{className:"flex gap-2 justify-center",children:c.map((l,x)=>e.jsx("input",{ref:y=>o.current[x]=y,type:"text",inputMode:"numeric",maxLength:1,value:l,onChange:y=>d(x,y.target.value),onKeyDown:y=>m(x,y),onPaste:b,disabled:a,className:`w-12 h-14 text-center text-2xl font-semibold rounded-lg border-2 transition-all duration-200
            ${n?"border-red-300 bg-red-50 text-red-600 focus:ring-red-500 focus:border-red-500":"border-gray-300 bg-white text-gray-900 focus:ring-blue-500 focus:border-blue-500"}
            focus:ring-2 focus:outline-none
            disabled:opacity-50 disabled:cursor-not-allowed
            hover:border-gray-400
          `,"aria-label":`Digit ${x+1}`},x))})},te=({isOpen:r,onClose:t,onVerified:s,isAdminMode:a=!1})=>{const[n,o]=i.useState(""),[c,f]=i.useState(null),[d,m]=i.useState(""),[b,l]=i.useState(!1),[x,y]=i.useState(!1),[w,v]=i.useState(""),[j,p]=i.useState(!1),[N,C]=i.useState(0),[R,A]=i.useState(0),[D,P]=i.useState(null),q=!1,se=!0;i.useEffect(()=>{if(r&&q){const u=a?"/admin/company-requests":"/submit-review";window.location.href=u}},[r,q,a]);const re=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;i.useEffect(()=>{r&&(o(""),f(null),m(""),l(!1),y(!1),v(""),p(!1),C(0),A(0),P(null))},[r]),i.useEffect(()=>{if(!n){f(null),m("");return}if(!re.test(n)){f(!1),m("Please enter a valid email address");return}f(!0),m("")},[n,se]),i.useEffect(()=>{if(N>0){const u=setTimeout(()=>{C(N-1)},1e3);return()=>clearTimeout(u)}},[N]),i.useEffect(()=>{if(R>0){const u=setTimeout(()=>{A(R-1)},1e3);return()=>clearTimeout(u)}},[R]);const ae=async u=>{if(u.preventDefault(),!(!c||!n)){l(!0),m("");try{await W(n),y(!0),C(60),A(60),P(new Date)}catch(h){console.error("=== RAW SENDOTP ERROR START ==="),console.error("Error object:",h),console.error("Error stringified:",JSON.stringify(h,null,2)),h&&typeof h=="object"&&(console.error("Error keys:",Object.keys(h)),console.error("Error.message:",h.message),console.error("Error.status:",h.status),console.error("Error.code:",h.code)),console.error("=== RAW SENDOTP ERROR END ==="),m(h instanceof Error?h.message:"Failed to send verification code")}finally{l(!1)}}},ne=async()=>{const u=w.trim();if(u.length===6){if(!/^\d{6}$/.test(u)){p(!0),m("Code must be 6 digits");return}l(!0),p(!1),m("");try{await Oe(n,u),s&&s(),a?window.location.href="/admin/company-requests":window.location.reload()}catch(h){console.error("=== RAW VERIFYOTP ERROR START ==="),console.error("Error object:",h),console.error("Error stringified:",JSON.stringify(h,null,2)),h&&typeof h=="object"&&(console.error("Error keys:",Object.keys(h)),console.error("Error.message:",h.message),console.error("Error.status:",h.status),console.error("Error.code:",h.code),console.error("Error.details:",h.details),console.error("Error.hint:",h.hint),console.error("Error.name:",h.name),console.error("Error.stack:",h.stack)),console.error("=== RAW VERIFYOTP ERROR END ==="),p(!0);const k=h instanceof Error?h.message.toLowerCase():"";k.includes("expired")||k.includes("token has expired")?m("Verification code has expired. Please request a new one."):k.includes("invalid")||k.includes("otp")?m("Invalid verification code. Please check and try again."):m(h instanceof Error?h.message:"Invalid verification code")}finally{l(!1)}}};i.useEffect(()=>{x&&w.length===6&&ne()},[w,x]);const oe=async()=>{if(!(N>0)){l(!0),m(""),v(""),p(!1);try{await W(n),C(60),A(60),P(new Date)}catch(u){console.error("=== RAW RESEND OTP ERROR START ==="),console.error("Error object:",u),console.error("Error stringified:",JSON.stringify(u,null,2)),u&&typeof u=="object"&&(console.error("Error keys:",Object.keys(u)),console.error("Error.message:",u.message),console.error("Error.status:",u.status),console.error("Error.code:",u.code)),console.error("=== RAW RESEND OTP ERROR END ==="),m(u instanceof Error?u.message:"Failed to resend code")}finally{l(!1)}}},V=()=>{b||t()},ie=u=>{u.target===u.currentTarget&&V()},z=u=>{const h=Math.floor(u/60),k=u%60;return`${h}:${k.toString().padStart(2,"0")}`};return!r||q?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm animate-fade-in",onClick:ie,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto animate-slide-up",children:[e.jsxs("div",{className:"relative p-6 pb-4",children:[e.jsx("button",{onClick:V,disabled:b,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200 disabled:opacity-50","aria-label":"Close modal",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-100 to-green-100 rounded-full flex items-center justify-center",children:a?e.jsx(S,{className:"w-8 h-8 text-blue-600"}):e.jsx(xe,{className:"w-8 h-8 text-blue-600"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(M,{className:"w-4 h-4 text-white"})})]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:x?"Enter Verification Code":a?"Admin Login":"Verify Your Email"}),e.jsx("p",{className:"text-gray-600 text-center leading-relaxed",children:x?`We sent a 6-digit code to ${n}`:a?"Enter your admin email to receive a secure verification code for instant access.":"To keep reviews authentic and anonymous, please verify your email with a secure code."}),x&&R>0&&e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Code expires in ",e.jsx("span",{className:"font-semibold text-blue-600",children:z(R)})]})}),x&&R===0&&e.jsx("div",{className:"mt-3 text-center",children:e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Code has expired. Please request a new one."})})]}),e.jsxs("div",{className:"px-6 pb-6",children:[x?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Pe,{value:w,onChange:v,disabled:b,error:j}),d&&e.jsxs("p",{className:"mt-3 text-sm text-red-600 flex items-center justify-center",children:[e.jsx(O,{className:"w-4 h-4 mr-1 flex-shrink-0"}),d]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:oe,disabled:b||N>0,className:"text-sm text-blue-600 hover:text-blue-700 transition-colors duration-200 disabled:text-gray-400 disabled:cursor-not-allowed",children:N>0?`Resend available in ${z(N)}`:"Resend Code"})}),e.jsx("div",{className:"text-center text-xs text-gray-500",children:D&&e.jsxs("p",{children:["Code sent at ",D.toLocaleTimeString()," • Valid for 1 minute"]})})]}),e.jsx("button",{onClick:()=>y(!1),disabled:b,className:"w-full border border-gray-300 text-gray-700 py-3 px-6 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Change Email"})]}):e.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",value:n,onChange:u=>o(u.target.value),placeholder:"Enter your email address",disabled:b,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-gray-900 placeholder-gray-400 ${c===!1?"border-red-300 bg-red-50":c===!0?"border-green-300 bg-green-50":"border-gray-300 bg-white"}`,"aria-describedby":d?"email-error":void 0}),c!==null&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:c?e.jsx(J,{className:"w-5 h-5 text-green-500"}):e.jsx(O,{className:"w-5 h-5 text-red-500"})})]}),d&&e.jsxs("p",{id:"email-error",className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-1 flex-shrink-0"}),d]})]}),e.jsx("button",{type:"submit",disabled:!c||b,className:"w-full bg-gradient-to-r from-blue-600 to-green-500 text-white py-3 px-6 rounded-lg font-medium hover:shadow-lg hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:shadow-none flex items-center justify-center space-x-2",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Sending..."})]}):e.jsx("span",{children:"Send Verification Code"})})]}),!x&&e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(M,{className:"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0"}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.jsx("span",{className:"font-medium",children:"Secure & Password-Free"})," - Enter the 6-digit code sent to your email to verify and sign in instantly."]})})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{href:"/support",className:"text-sm text-blue-600 hover:text-blue-700 transition-colors duration-200",children:"Need help? Contact Support"})})]})]})})},qe=()=>{const r=Y(),[t,s]=i.useState(!1),[a,n]=i.useState(!1),[o,c]=i.useState(null),[f,d]=i.useState(!1),[m,b]=i.useState(!0),[l,x]=i.useState(!1);i.useEffect(()=>{y();{const{data:p}=g.auth.onAuthStateChange((N,C)=>{C!=null&&C.user?c(C.user):c(null)});return()=>{p.subscription.unsubscribe()}}},[]);const y=async()=>{try{const p=await T();if(c(p),p){const N=await ee();x(N)}else x(!1)}catch{c(null),x(!1)}finally{b(!1)}},w=()=>{o?r("/submit-review"):n(!0)},v=async()=>{try{await g.auth.signOut(),c(null),d(!1),r("/")}catch(p){console.error("Logout failed:",p)}},j=()=>{if(!(o!=null&&o.email))return"";const p=o.email;return p.length>25?p.substring(0,22)+"...":p};return e.jsxs(e.Fragment,{children:[!1,e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-green-500 rounded-lg flex items-center justify-center",children:e.jsx(X,{className:"w-4 h-4 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Truplace"})]})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[e.jsx("a",{href:"/companies",className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",children:"Companies"}),e.jsx("a",{href:"/about",className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",children:"About"}),l&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("a",{href:"/admin/company-requests",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Requests"})]}),e.jsxs("a",{href:"/admin/companies",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Companies"})]})]})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsxs("button",{onClick:w,className:"bg-gradient-to-r from-blue-600 to-green-500 text-white px-6 py-2 rounded-lg font-medium hover:shadow-lg hover:scale-105 transition-all duration-300 flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:"Write a Review"})]}),o&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>d(!f),className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-green-500 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"w-4 h-4 text-white"})}),e.jsx(fe,{className:"w-4 h-4 text-gray-600"})]}),f&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Signed in as"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:j()}),l&&e.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-0.5 mt-1 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:[e.jsx(S,{className:"w-3 h-3"}),e.jsx("span",{children:"Admin"})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/admin/company-requests",className:"w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 flex items-center space-x-2 transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Company Requests"})]}),e.jsxs("a",{href:"/admin/companies",className:"w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 flex items-center space-x-2 transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Manage Companies"})]})]}),e.jsxs("button",{onClick:v,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2 transition-colors duration-200",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})]}),e.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200",onClick:()=>s(!t),"aria-label":"Toggle menu",children:t?e.jsx(L,{className:"w-6 h-6"}):e.jsx(pe,{className:"w-6 h-6"})})]}),t&&e.jsxs("div",{className:"md:hidden border-t border-gray-200 py-4",children:[o&&e.jsxs("div",{className:"px-4 py-3 mb-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Signed in as"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:j()})]}),e.jsxs("nav",{className:"flex flex-col space-y-4",children:[e.jsx("a",{href:"/companies",className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",children:"Companies"}),e.jsx("a",{href:"/about",className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",children:"About"}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/admin/company-requests",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Company Requests"})]}),e.jsxs("a",{href:"/admin/companies",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Manage Companies"})]})]}),e.jsxs("button",{onClick:w,className:"bg-gradient-to-r from-blue-600 to-green-500 text-white px-6 py-2 rounded-lg font-medium hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2 w-full",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:"Write a Review"})]}),o&&e.jsxs("button",{onClick:v,className:"border border-gray-300 text-gray-700 px-6 py-2 rounded-lg font-medium hover:bg-gray-50 transition-all duration-300 flex items-center justify-center space-x-2 w-full",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})]})}),e.jsx(te,{isOpen:a,onClose:()=>n(!1),isAdminMode:!1})]})},Le=()=>{const[r,t]=i.useState(!1);return e.jsxs("footer",{className:"bg-gray-900 text-white",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-green-500 rounded-lg flex items-center justify-center",children:e.jsx(X,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-xl font-bold",children:"Truplace"})]}),e.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed",children:"The most trusted platform for anonymous workplace reviews. Help others make informed career decisions with honest insights about company culture, management, and work environment."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r hover:from-blue-600 hover:to-green-500 transition-all duration-300","aria-label":"Twitter",children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r hover:from-blue-600 hover:to-green-500 transition-all duration-300","aria-label":"Facebook",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r hover:from-blue-600 hover:to-green-500 transition-all duration-300","aria-label":"LinkedIn",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r hover:from-blue-600 hover:to-green-500 transition-all duration-300","aria-label":"Instagram",children:e.jsx(je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"/about",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"/contact",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Contact"})}),e.jsx("li",{children:e.jsx("a",{href:"/careers",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Careers"})}),e.jsx("li",{children:e.jsx("a",{href:"/blog",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Blog"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"/privacy",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"/terms",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx("a",{href:"/guidelines",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Community Guidelines"})}),e.jsx("li",{children:e.jsx("a",{href:"/cookies",className:"text-gray-300 hover:text-white transition-colors duration-200",children:"Cookie Policy"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>t(!0),className:"text-gray-400 hover:text-gray-300 transition-colors duration-200 text-sm",children:"Admin"})})]})]})]}),e.jsx("div",{className:"border-t border-gray-800 mt-12 pt-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"© 2025 Truplace. All rights reserved."}),e.jsxs("div",{className:"flex items-center space-x-6 mt-4 md:mt-0",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Trusted by professionals worldwide"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-400 text-sm font-medium",children:"Secure & Anonymous"})]})]})]})})]}),e.jsx(te,{isOpen:r,onClose:()=>t(!1),isAdminMode:!0})]})},De=({id:r,type:t,message:s,duration:a=5e3,onClose:n})=>{i.useEffect(()=>{const d=setTimeout(()=>{n(r)},a);return()=>clearTimeout(d)},[r,a,n]);const o=()=>{switch(t){case"success":return e.jsx(J,{className:"w-5 h-5"});case"error":return e.jsx(ve,{className:"w-5 h-5"});case"warning":return e.jsx(O,{className:"w-5 h-5"});case"info":return e.jsx(we,{className:"w-5 h-5"})}},c=()=>{switch(t){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800"}},f=()=>{switch(t){case"success":return"text-green-600";case"error":return"text-red-600";case"warning":return"text-yellow-600";case"info":return"text-blue-600"}};return e.jsxs("div",{className:`${c()} border rounded-lg shadow-lg p-4 flex items-start space-x-3 min-w-[320px] max-w-md animate-slide-in`,role:"alert",children:[e.jsx("div",{className:f(),children:o()}),e.jsx("p",{className:"flex-1 text-sm font-medium",children:s}),e.jsx("button",{onClick:()=>n(r),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close notification",children:e.jsx(L,{className:"w-4 h-4"})})]})},Ve=({toasts:r,onClose:t})=>e.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col space-y-3",children:r.map(s=>e.jsx(De,{id:s.id,type:s.type,message:s.message,onClose:t},s.id))}),B=({children:r})=>{const t=Y(),[s,a]=i.useState(!0),[n,o]=i.useState(!1),[c,f]=i.useState(null);i.useEffect(()=>{d();const{data:{subscription:m}}=g.auth.onAuthStateChange((b,l)=>{l?d():s||(f("You must be logged in to access this page"),o(!1),setTimeout(()=>t("/"),2e3))});return()=>{m.unsubscribe()}},[]);const d=async()=>{try{const{data:{session:m}}=await g.auth.getSession();if(!(m!=null&&m.user)){f("You must be logged in to access this page"),a(!1),setTimeout(()=>t("/"),2e3);return}if(!await ee()){f("You do not have admin privileges to access this page"),a(!1),setTimeout(()=>t("/"),2e3);return}o(!0),a(!1)}catch(m){console.error("Admin access check failed:",m),f("Failed to verify admin access"),a(!1),setTimeout(()=>t("/"),2e3)}};return s?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx(S,{className:"w-8 h-8 text-blue-600 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})]}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Verifying admin access..."})]})}):c?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Ne,{className:"w-6 h-6 text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Access Denied"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:c}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to home page..."})]})}):n?e.jsx(e.Fragment,{children:r}):null},ze=()=>{const[r,t]=i.useState([]),s=i.useCallback((d,m)=>{const b=Math.random().toString(36).substring(7);t(l=>[...l,{id:b,type:d,message:m}])},[]),a=i.useCallback(d=>{t(m=>m.filter(b=>b.id!==d))},[]),n=i.useCallback(d=>{s("success",d)},[s]),o=i.useCallback(d=>{s("error",d)},[s]),c=i.useCallback(d=>{s("warning",d)},[s]),f=i.useCallback(d=>{s("info",d)},[s]);return{toasts:r,removeToast:a,success:n,error:o,warning:c,info:f}},Me=i.lazy(()=>_(()=>import("./LandingPage-wQaGkQKy.js"),__vite__mapDeps([4,1,3,2]))),Ue=i.lazy(()=>_(()=>import("./CompaniesPage-T7SyRX8Z.js"),__vite__mapDeps([5,1,3,2]))),Fe=i.lazy(()=>_(()=>import("./AboutPage-BV5smuNk.js"),__vite__mapDeps([6,1,2,3]))),$e=i.lazy(()=>_(()=>import("./SubmitReviewPage-BUESC72h.js"),__vite__mapDeps([7,1,8,3,2]))),We=i.lazy(()=>_(()=>import("./CompanyProfilePage-Cdrx4Hzp.js"),__vite__mapDeps([9,1,3,10,2]))),Be=i.lazy(()=>_(()=>import("./RequestCompanyPage-B-C-GeTB.js"),__vite__mapDeps([11,1,3,12,13,8,2]))),Ye=i.lazy(()=>_(()=>import("./CompanyRequestedPage-CVG2Q1JT.js"),__vite__mapDeps([14,1,3,2]))),Je=i.lazy(()=>_(()=>import("./AdminCompanyRequestsPage-kUYSkNTf.js"),__vite__mapDeps([15,1,3,13,12,2]))),Xe=i.lazy(()=>_(()=>import("./AdminCompaniesPage-BiR5mll4.js"),__vite__mapDeps([16,1,13,3,2]))),Ke=i.lazy(()=>_(()=>import("./NotificationPage-FyAMxtL1.js"),__vite__mapDeps([17,1,3,2]))),Ge=le.createContext(null);function He(){const r=ze();return e.jsx(Ge.Provider,{value:r,children:e.jsx(de,{children:e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(qe,{}),e.jsx("div",{className:"flex-grow",children:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}),children:e.jsxs(me,{children:[e.jsx(E,{path:"/",element:e.jsx(Me,{})}),e.jsx(E,{path:"/submit-review",element:e.jsx($e,{})}),e.jsx(E,{path:"/request-company",element:e.jsx(Be,{})}),e.jsx(E,{path:"/company-requested",element:e.jsx(Ye,{})}),e.jsx(E,{path:"/admin/company-requests",element:e.jsx(B,{children:e.jsx(Je,{})})}),e.jsx(E,{path:"/admin/companies",element:e.jsx(B,{children:e.jsx(Xe,{})})}),e.jsx(E,{path:"/notification/:token",element:e.jsx(Ke,{})}),e.jsx(E,{path:"/company/:companyId",element:e.jsx(We,{})}),e.jsx(E,{path:"/companies",element:e.jsx(Ue,{})}),e.jsx(E,{path:"/about",element:e.jsx(Fe,{})})]})})}),e.jsx(Le,{}),e.jsx(Ve,{toasts:r.toasts,onClose:r.removeToast})]})})})}H(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(He,{})}));export{B as A,te as E,Ge as T,rt as a,T as b,nt as c,st as d,at as e,xt as f,tt as g,it as h,ct as i,e as j,lt as k,mt as l,ut as m,dt as r,g as s,ot as u};
